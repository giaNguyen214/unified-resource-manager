job_id: demo1
job_type: bigdata # ai | hpc | bigdata
resources:
  cpu: 4
  ram: 8Gi
  gpu: 1
entrypoint: main.py

install:
  # ================= type: os_pkg =================
  - type: os_pkg
    manager: apt
    packages:
      - openmpi-bin
      - libssl-dev
      - build-essential
      - cmake
      - git
      - wget
      - curl

  # ================= type: container =================
  - type: container
    image: mpioperator/openmpi:latest
    kind: Job

  - type: container
    image: bitnami/spark:3.5
    kind: Job

  - type: container
    image: flink:1.18
    kind: Job

  - type: container
    image: bitnami/kafka:latest
    kind: StatefulSet

  - type: container
    image: bitnami/hadoop:latest
    kind: StatefulSet

  - type: container
    image: tensorflow/tensorflow:2.15.0-gpu
    kind: Job

  - type: container
    image: pytorch/pytorch:2.1.0-cuda11.8-cudnn8-runtime
    kind: Job

  - type: container
    image: redis:7
    kind: StatefulSet

  - type: container
    image: postgres:16
    kind: StatefulSet

  # ================= type: language package =================
  - type: lang_pkg
    lang: python
    manager: pip
    packages:
      - tensorflow
      - torch
      - xgboost
      - scikit-learn
      - ray
      - dask
